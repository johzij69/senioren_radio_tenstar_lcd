<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Senior Webradio</title>
    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
      }
      .content {
        margin-top: 10px;
        margin-left: 10px;
        font-family: Arial, sans-serif;
      }
      .content input {
        padding: 5px;
        font-family: Arial, sans-serif;
      }
      .input_url {
        padding: 5px;
        width: 50%;
        border-radius: 5px;
        border-width: thin;
        margin-left: 5px;
        margin-right: 5px;
        width: 48vh;
      }

      .input_naam {
        padding: 5px;
        border-radius: 5px;
        border-width: thin;
        margin-left: 5px;
        margin-right: 5px;
      }
      .input_button {
        padding: 5px;
        border-radius: 5px;
        border-width: thin;
        padding-left: 10px;
        padding-right: 10px;
        margin-left: 43vw;
        margin-top: 15px;
      }

      #saving {
        position: absolute;
        top: 45px;
        left: 0px;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.5);
        display: none;
        z-index: 999;
      }
      .stream_item {
        padding: 5px;
        padding-left: 15px;
        border: 2px solid lightgray;
        border-radius: 8px;
        margin-bottom: 5px;
        max-width: 52vh;
        padding-bottom: 24px;
        cursor: move; /* Add cursor style */
      }

      .loader {
        position: absolute;
        left: 50vw;
        border: 8px solid #f3f3f3;
        border-top: 8px solid #3498db;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        top: 50vh;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .top-menu {
        background-color: #333;
        overflow: hidden;
      }
      .top-menu a {
        float: left;
        display: block;
        color: white;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
      }
      .top-menu a:hover {
        background-color: #ddd;
        color: black;
      }

      .edit-label {
        margin-top: 5px;
        margin-left: 7px;
        font-size: 14px;
        font-weight: bold;
        margin-bottom: 2px;
      }

      .url-container {
        margin-top: 15px;
      }

      @media screen and (max-width: 600px) {
        .top-menu a {
          float: none;
          display: block;
          width: 100%;
          text-align: left;
        }

        .input_url {
          width: 29vh;
        }

        .input_button {
          margin-left: 25vh;
        }
      }
    </style>
    <script>
      function saveStream() {
        // Verzamel de gegevens van het formulier
        document.getElementById("saving").style.display = "block";
        var formData = {};
        var streamNaam = document.getElementById("input_naam").value;
        var streamUrl = document.getElementById("input_url").value;
        var streamLogo = document.getElementById("input_logo").value;

        formData["json_settings:"] = {
          naam: streamNaam,
          url: streamUrl,
          logo: streamLogo,
        };

        // Converteer de gegevens naar JSON en geef deze een naam
        var postData = JSON.stringify(formData);
 //       var postData = { json_settings: jsonData };

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/savestream", true);
        xhr.setRequestHeader("Content-Type", "application/json");
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4 && xhr.status === 200) {
            document.getElementById("saving").style.display = "none";
          }
        };
        xhr.send(JSON.stringify(postData));
      }
    </script>
  </head>
  <body>
    <div class="top-menu">
      <a href="/">Overzicht</a>
      <a href="/deleteurl">Verwijder</a>
      <a href="/addurl">Voeg toe</a>
      <a href="#">Contact</a>
    </div>

    <div class="content">
      <form method="post" id="updateForm">
        <div id="saving"><div class="loader"></div></div>
        <div class="stream_item">
          <div id="naam" class="naam-container">
            <div class="edit-label">Stream naam:</div>
            <input
              class="input_naam"
              id="input_naam"
              type="text"
              name="naam"
              value="NPO-Radio1"
            />
          </div>
          <div id="url-0" class="url-container">
            <div class="edit-label">Stream url:</div>
            <input
              class="input_url"
              id="input_url"
              type="text"
              name="url"
              value="https://icecast.omroep.nl/radio1-bb-mp3"
            />
          </div>
          <div id="url-log-0" class="url-container">
            <div class="edit-label">Logo url:</div>
            <input
              class="input_url"
              id="input_logo"
              type="text"
              name="logo"
              value="https://img.prio-ict.nl/api/images/webradio-default.jpg"
            />
          </div>
          <input
            id="url_button"
            class="input_button"
            type="button"
            value="Opslaan"
            onclick="saveStream()"
          />
        </div>
      </form>
    </div>
  </body>
</html>
